<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="Thu, 15 Aug 2024 17:30:00 GMT">
    <title>SOLOWAYS - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ë–ê–î–æ–≤</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #55685BE5;
            --secondary-green: #55685BE5;
            --accent-orange: #E67E22;
            --light-orange: #F39C12;
            --soft-cream: #FDF6E3;
            --warm-white: #FEFEFE;
            --text-dark: #2C3E50;
            --text-medium: #5D6D7E;
            --text-light: #85929E;
            --border-light: #E8F4FD;
            --success-green: #55685BE5;
            --shadow-soft: 0 8px 32px rgba(85, 104, 91, 0.08);
            --shadow-medium: 0 12px 48px rgba(85, 104, 91, 0.12);
            --shadow-strong: 0 20px 64px rgba(85, 104, 91, 0.16);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: rgba(0, 0, 0, 0.5);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            font-feature-settings: 'kern' 1, 'liga' 1;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal-container {
            max-width: 600px;
            width: 100%;
            background: var(--warm-white);
            border-radius: 24px;
            box-shadow: var(--shadow-strong);
            overflow: hidden;
            position: relative;
            animation: modalSlideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-green) 0%, var(--secondary-green) 100%);
        }

        /* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        .header {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            color: var(--warm-white);
            padding: 32px 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.02)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.02)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.03)"/><circle cx="10" cy="50" r="0.5" fill="rgba(255,255,255,0.03)"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grain)"/></svg>');
            opacity: 0.2;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
        }

        .logo-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Montserrat', sans-serif;
            font-size: 22px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            color: var(--warm-white);
            margin-right: 12px;
            box-shadow: 0 6px 24px rgba(85, 104, 91, 0.3);
            position: relative;
            overflow: hidden;
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 22px;
            margin-bottom: 8px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            opacity: 0.9;
            font-weight: 400;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            position: relative;
            z-index: 1;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            padding: 32px 24px;
            background: var(--warm-white);
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ */
        .question-modal {
            width: 100%;
            background: var(--warm-white);
            padding: 24px;
            border-radius: 16px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-light);
            animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .question-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-green) 0%, var(--secondary-green) 100%);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* –ß–µ–∫–±–æ–∫—Å—ã */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .checkbox-item {
            background: #FAFBFC;
            border: 2px solid var(--border-light);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            font-style: normal;
            color: var(--text-dark);
            position: relative;
            overflow: hidden;
            line-height: 100%;
            letter-spacing: 0%;
        }

        .checkbox-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-orange), var(--light-orange));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .checkbox-item:hover::before {
            opacity: 0.08;
        }

        .checkbox-item:hover {
            border-color: rgba(230, 126, 34, 0.4);
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(230, 126, 34, 0.2);
            background: #FFF9F6;
        }

        .checkbox-item.selected {
            border-color: var(--accent-orange);
            background: linear-gradient(135deg, rgba(230, 126, 34, 0.1) 0%, rgba(243, 156, 18, 0.1) 100%);
            color: var(--text-dark);
            transform: scale(1.02);
        }

        .checkbox-item.selected::before {
            opacity: 0.12;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 12px;
            accent-color: var(--primary-green);
            width: 20px;
            height: 20px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            color: var(--warm-white);
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(85, 104, 91, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            background: linear-gradient(135deg, #D5DBDB 0%, #BDC3C7 100%);
            color: var(--text-light);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn:disabled::before {
            display: none;
        }

        .btn-secondary {
            background-color: var(--primary-green);
            color: #FFFFFF;
        }

        .btn-secondary:hover {
            background-color: var(--secondary-green);
        }

        /* –í–æ–ø—Ä–æ—Å—ã */
        .question-card {
            text-align: center;
        }

        .question-card h3 {
            color: var(--primary-green);
            margin-bottom: 30px;
            font-size: 1.8em;
            font-weight: 600;
        }

        .question-counter {
            color: var(--primary-green);
            font-size: 0.9em;
            font-weight: 500;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* –û–ø—Ü–∏–∏ */
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .option {
            background-color: #F5E8C7;
            border: 2px solid #E8D5B7;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 1.1em;
            font-weight: 500;
        }

        .option:hover {
            border-color: #F4A261;
            background-color: #F4A261;
            color: #2A5F4E;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 162, 97, 0.3);
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.3);
            accent-color: #F4A261;
        }

        .option.selected {
            border-color: #F4A261;
            background-color: #F4A261;
            color: #2A5F4E;
            font-weight: 600;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #E8D5B7;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: #F4A261;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        .progress-container {
            background-color: #E8D5B7;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            background-color: #F4A261;
            height: 100%;
            transition: width 0.3s ease;
        }

        /* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */
        .recommendations {
            background-color: #F5E8C7;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .recommendation-card {
            background-color: #FFFFFF;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(42, 95, 78, 0.1);
            border-left: 4px solid #F4A261;
        }

        .recommendation-card h3 {
            color: #2A5F4E;
            margin-bottom: 10px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .recommendation-card p {
            color: #2A5F4E;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        /* –ê–ª–µ—Ä—Ç—ã */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }

        .alert-success {
            background-color: #D4EDDA;
            color: #155724;
            border: 1px solid #C3E6CB;
        }

        .alert-error {
            background-color: #F8D7DA;
            color: #721C24;
            border: 1px solid #F5C6CB;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        /* Email —ç–∫—Ä–∞–Ω */
        .email-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #E8D5B7;
            border-radius: 10px;
            font-size: 16px;
            background-color: #FFFFFF;
            color: #2A5F4E;
            transition: border-color 0.3s ease;
        }

        .email-input:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        .consent-group {
            margin: 20px 0;
        }

        .consent-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 10px;
        }

        .consent-checkbox {
            margin-top: 3px;
            transform: scale(1.2);
            accent-color: var(--primary-green);
        }

        .consent-text {
            font-size: 14px;
            line-height: 1.4;
            color: #2A5F4E;
            cursor: pointer;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ */
        .question-card {
            background: var(--warm-white);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-light);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .question-card:hover::before {
            transform: scaleX(1);
        }

        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
            border-color: rgba(85, 104, 91, 0.2);
        }

        .question-counter {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-medium);
            font-size: 13px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            margin-bottom: 20px;
            text-transform: uppercase;
            opacity: 0.8;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, #F1F3F4 0%, #E8EAED 100%);
            border-radius: 12px;
            margin-bottom: 32px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-orange) 0%, var(--light-orange) 100%);
            border-radius: 12px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2.5s infinite;
        }

        .question-card h3 {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            font-size: 22px;
            margin-bottom: 32px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        #results h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 22px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            color: var(--text-dark);
            margin-bottom: 24px;
            text-align: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 24px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 20px 24px;
            background: #FAFBFC;
            border: 2px solid var(--border-light);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            font-style: normal;
            color: var(--text-dark);
            position: relative;
            overflow: hidden;
            font-size: 15px;
            line-height: 100%;
            letter-spacing: 0%;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(230, 126, 34, 0.08), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .option:hover::before {
            transform: translateX(100%);
        }

        .option:hover {
            background: #FFF9F6;
            border-color: rgba(230, 126, 34, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(230, 126, 34, 0.15);
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            width: 22px;
            height: 22px;
            margin-right: 16px;
            accent-color: var(--accent-orange);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option input[type="radio"]:checked,
        .option input[type="checkbox"]:checked {
            transform: scale(1.1);
        }

        .option.selected {
            background: linear-gradient(135deg, var(--accent-orange) 0%, var(--light-orange) 100%);
            color: var(--warm-white);
            border-color: var(--accent-orange);
            transform: scale(1.02);
            box-shadow: 0 12px 32px rgba(230, 126, 34, 0.3);
        }

        .option.selected input {
            accent-color: var(--warm-white);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏ */
        .input-group {
            margin: 20px 0;
        }

        .name-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-light);
            border-radius: 12px;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-dark);
            background: var(--warm-white);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
        }

        .name-input:focus {
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(85, 104, 91, 0.1);
        }

        .name-input::placeholder {
            color: var(--text-light);
            opacity: 0.7;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            body {
                padding: 16px;
            }

            .modal-container {
                max-width: 100%;
                border-radius: 16px;
            }

            .header {
                padding: 24px 20px;
            }

            .header h1 {
                font-size: 20px;
            }

            .main-content {
                padding: 24px 20px;
                min-height: 300px;
            }

            .question-card {
                padding: 20px;
            }

            .question-modal {
                padding: 20px;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .question-options {
                gap: 12px;
            }

            .btn {
                padding: 12px 20px;
                font-size: 14px;
            }

            .option {
                padding: 14px 16px;
                font-size: 13px;
            }

            .details-btn {
                padding: 10px 20px;
                font-size: 11px;
            }
        }

        /* –°–∫—Ä—ã—Ç–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .hidden {
            display: none !important;
        }

        /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ */
        #question-container,
        #email-screen,
        #results {
            position: relative;
            width: 100%;
            min-height: 400px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        #results {
            padding: 20px;
        }

        #results h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--text-dark);
            font-size: 28px;
            font-weight: 600;
        }

        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-up {
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ */
        .product-card {
            background: var(--warm-white);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-orange) 0%, var(--light-orange) 100%);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .product-card:hover::before {
            transform: scaleX(1);
        }

        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-medium);
            border-color: rgba(230, 126, 34, 0.2);
        }

        .product-image {
            width: 100px;
            height: 100px;
            object-fit: contain;
            border-radius: 8px;
            background: #F8F9FA;
            margin-bottom: 15px;
            display: block;
        }

        .product-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .card-badge {
            background: #000000;
            color: #FFFFFF;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            align-self: flex-start;
            margin-bottom: 10px;
            position: absolute;
            top: 15px;
            left: 15px;
        }

        .product-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 22px;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            color: #000000;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .product-description {
            font-family: 'Montserrat', sans-serif;
            color: #000000;
            line-height: 100%;
            margin-bottom: 15px;
            font-size: 12px;
            font-weight: 400;
            font-style: normal;
            letter-spacing: 0%;
            text-transform: uppercase;
        }

        .product-price {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4em;
            font-weight: 600;
            font-style: normal;
            line-height: 100%;
            letter-spacing: 0%;
            color: #000000;
            margin-bottom: 15px;
        }

        .details-btn {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            color: var(--warm-white);
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-style: normal;
            font-size: 13px;
            line-height: 100%;
            letter-spacing: 0%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .details-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .details-btn:hover::before {
            opacity: 1;
        }

        .details-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(85, 104, 91, 0.3);
            color: var(--warm-white);
            text-decoration: none;
        }

        /* –°–µ—Ç–∫–∞ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π */
        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .product-card {
            animation: cardSlideIn 0.6s ease-out;
        }

        .product-card:nth-child(1) { animation-delay: 0.1s; }
        .product-card:nth-child(2) { animation-delay: 0.2s; }
        .product-card:nth-child(3) { animation-delay: 0.3s; }
        .product-card:nth-child(4) { animation-delay: 0.4s; }
        .product-card:nth-child(5) { animation-delay: 0.5s; }

        @keyframes cardSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        @media (max-width: 768px) {
            .recommendations-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .product-card {
                padding: 15px;
                margin-bottom: 0;
            }

            .product-title {
                font-family: 'Montserrat', sans-serif;
                font-size: 22px;
                font-weight: 600;
                font-style: normal;
                line-height: 100%;
                letter-spacing: 0%;
            }

            .product-description {
                font-size: 13px;
            }

            .product-image {
                width: 120px;
                height: 120px;
            }

            .details-btn {
                padding: 10px 16px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
        <div class="modal-container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon">SW</div>
                <div>
                    <h1>SOLOWAYS</h1>
                    <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ë–ê–î–æ–≤</p>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ -->
            <div id="question-container" class="question-modal">
                <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>

            <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ email -->
            <div id="email-screen" class="hidden">
                <h2>–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ email</h2>
                <div class="question-card">
                    <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É –ø–æ—á—Ç—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</p>
                    <div class="input-group">
                        <input type="email" id="userEmail" placeholder="–í–∞—à email" class="email-input" required>
                    </div>
                    <div class="consent-group">
                        <div class="consent-item">
                            <input type="checkbox" id="consentPd" class="consent-checkbox" required>
                            <label for="consentPd" class="consent-text">
                                –Ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ –∏ –¥–∞—é –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ—Ä—è–¥–∫–µ –∏ –Ω–∞ —É—Å–ª–æ–≤–∏—è—Ö, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –ü–æ–ª–∏—Ç–∏–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
                            </label>
                        </div>
                        <div class="consent-item">
                            <input type="checkbox" id="consentMarketing" class="consent-checkbox">
                            <label for="consentMarketing" class="consent-text">
                                –Ø –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, —Å–∫–∏–¥–∫–∞—Ö, —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∞—Ö –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.
                            </label>
                        </div>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="skipEmail()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                        <button class="btn" onclick="submitEmail()">–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
                    </div>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div id="results" class="hidden">
                <h2>–í–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
                
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –∏ –ø–æ–¥–±–∏—Ä–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏...</p>
                </div>

                <div id="results-content" class="hidden">
                    <div class="question-card">
                        <h3>–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h3>
                        <div id="main-recommendations" class="recommendations-grid"></div>
                    </div>
                    
                    <div class="question-card">
                        <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h3>
                        <div id="additional-recommendations" class="recommendations-grid"></div>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn btn-secondary" onclick="restart()">–ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let selectedTopics = [];
        let allQuestions = [];
        let supplementScores = {}; // –•—Ä–∞–Ω–∏–º –±–∞–ª–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ë–ê–î–∞
        let userName = '';
        let selectedTopic = '';
        let userEmail = '';
        let userConsentPd = false;
        let userConsentMarketing = false;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            showWelcomeScreen();
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω
        function showWelcomeScreen() {
            const container = document.getElementById('question-container');
            container.innerHTML = `
                <div class="question-card">
                    <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ë–ê–î–æ–≤</h3>
                    <p>–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –∏ –º—ã –ø–æ–¥–±–µ—Ä–µ–º –¥–ª—è –≤–∞—Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏</p>
                    <div style="margin-top: 40px;">
                        <button class="btn" onclick="startQuestionnaire()">–ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å</button>
                    </div>
                </div>
            `;
        }

        // –ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å —Å –≤–æ–ø—Ä–æ—Å–∞ –æ–± –∏–º–µ–Ω–∏
        function startQuestionnaire() {
            showNameQuestion();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–ø—Ä–æ—Å –æ–± –∏–º–µ–Ω–∏
        function showNameQuestion() {
            const container = document.getElementById('question-container');
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-counter">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 2</div>
                    <h3>–ö–∞–∫ –∫ –≤–∞–º –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?</h3>
                    <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è</p>
                    <div class="input-group">
                        <input type="text" id="userName" placeholder="–í–∞—à–µ –∏–º—è" class="name-input" maxlength="50">
                    </div>
                    <div class="buttons">
                        <button class="btn" onclick="submitName()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                    </div>
                </div>
            `;
        }

        // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤–≤–æ–¥ –∏–º–µ–Ω–∏
        function submitName() {
            const nameInput = document.getElementById('userName');
            const name = nameInput.value.trim();
            
            if (name.length < 2) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            userName = name;
            showTopicQuestion();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–ø—Ä–æ—Å –æ –≤—ã–±–æ—Ä–µ —Ç–µ–º—ã
        function showTopicQuestion() {
            const container = document.getElementById('question-container');
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-counter">–í–æ–ø—Ä–æ—Å 2 –∏–∑ 2</div>
                    <h3>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, ${userName}, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –≤–∞—Å —Ç–µ–º—É</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="selectTopic('energy')">
                            <input type="radio" name="topic" value="energy" id="energy">
                            <label for="energy">–ë–æ–¥—Ä–æ—Å—Ç—å –∏ —ç–Ω–µ—Ä–≥–∏—è</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('sleep')">
                            <input type="radio" name="topic" value="sleep" id="sleep">
                            <label for="sleep">–ö—Ä–µ–ø–∫–∏–π —Å–æ–Ω, –º–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('weight')">
                            <input type="radio" name="topic" value="weight" id="weight">
                            <label for="weight">–ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Å–∞ –∏ –∞–ø–ø–µ—Ç–∏—Ç–∞</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('skin')">
                            <input type="radio" name="topic" value="skin" id="skin">
                            <label for="skin">–ß–∏—Å—Ç–∞—è –∫–æ–∂–∞, –∫—Ä–µ–ø–∫–∏–µ –≤–æ–ª–æ—Å—ã</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('digestion')">
                            <input type="radio" name="topic" value="digestion" id="digestion">
                            <label for="digestion">–ö–æ–º—Ñ–æ—Ä—Ç –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('joints')">
                            <input type="radio" name="topic" value="joints" id="joints">
                            <label for="joints">–ü–æ–¥–≤–∏–∂–Ω—ã–µ —Å—É—Å—Ç–∞–≤—ã, –∫—Ä–µ–ø–∫–∏–µ –∫–æ—Å—Ç–∏</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('immunity')">
                            <input type="radio" name="topic" value="immunity" id="immunity">
                            <label for="immunity">–°–∏–ª—å–Ω—ã–π –∏–º–º—É–Ω–∏—Ç–µ—Ç</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('heart')">
                            <input type="radio" name="topic" value="heart" id="heart">
                            <label for="heart">–ó–¥–æ—Ä–æ–≤–æ–µ —Å–µ—Ä–¥—Ü–µ –∏ —Å–æ—Å—É–¥—ã</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('thyroid')">
                            <input type="radio" name="topic" value="thyroid" id="thyroid">
                            <label for="thyroid">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —â–∏—Ç–æ–≤–∏–¥–Ω–æ–π –∂–µ–ª–µ–∑—ã</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('female')">
                            <input type="radio" name="topic" value="female" id="female">
                            <label for="female">–†–µ–≥—É–ª—è—Ä–Ω—ã–π —Ü–∏–∫–ª, –º—è–≥–∫–∏–π –ü–ú–°</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('menopause')">
                            <input type="radio" name="topic" value="menopause" id="menopause">
                            <label for="menopause">–ú–µ–Ω–æ–ø–∞—É–∑–∞ –±–µ–∑ –ø—Ä–∏–ª–∏–≤–æ–≤</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('male')">
                            <input type="radio" name="topic" value="male" id="male">
                            <label for="male">–ú—É–∂—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ</label>
                        </div>
                        <div class="checkbox-item" onclick="selectTopic('iron')">
                            <input type="radio" name="topic" value="iron" id="iron">
                            <label for="iron">–ü–æ–¥–Ω—è—Ç—å –≥–µ–º–æ–≥–ª–æ–±–∏–Ω</label>
                        </div>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="showNameQuestion()">–ù–∞–∑–∞–¥</button>
                        <button class="btn" onclick="submitTopic()" id="continueBtn" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                    </div>
                </div>
            `;
        }

        // –í—ã–±—Ä–∞—Ç—å —Ç–µ–º—É
        function selectTopic(topic) {
            selectedTopic = topic;
            document.getElementById('continueBtn').disabled = false;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            document.querySelectorAll('.checkbox-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—ã–±–æ—Ä —Ç–µ–º—ã
        function submitTopic() {
            if (!selectedTopic) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É');
                return;
            }
            
            loadDynamicQuestions();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–∞
        function showQuestion(index) {
            const container = document.getElementById('question-container');
            const question = questions[index];
            
            // –ï—Å–ª–∏ —ç—Ç–æ –≤–æ–ø—Ä–æ—Å –æ —Ç–µ–º–∞—Ö –∏ –ø–æ–ª —É–∂–µ –≤—ã–±—Ä–∞–Ω, —Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ç–µ–º—ã
            if (question.id === 'topics' && userAnswers.gender) {
                const selectedGender = userAnswers.gender;
                question.options = question.allOptions.filter(option => 
                    option.gender === 'all' || option.gender === selectedGender
                );
            }
            
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
            const progress = ((index + 1) / questions.length) * 100;
            
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-counter">–í–æ–ø—Ä–æ—Å ${index + 1} –∏–∑ ${questions.length}</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <h3>${question.text}</h3>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <label class="option">
                                <input type="${question.type}" name="q${index}" value="${option.value}" id="q${index}-${optIndex}">
                                ${option.label}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            if (question.type === 'radio') {
                container.querySelectorAll('input[type="radio"]').forEach(input => {
                    input.addEventListener('change', () => {
                        userAnswers[question.id] = input.value;
                        
                        // –ï—Å–ª–∏ —ç—Ç–æ –≤–æ–ø—Ä–æ—Å –æ —Ç–µ–º–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ç–µ–º—É
                        if (question.id === 'topics') {
                            selectedTopics = [input.value]; // –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Ç–µ–º–∞
                        }
                        
                        // –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
                        setTimeout(() => {
                            if (index < questions.length - 1) {
                                showQuestion(index + 1);
                            } else {
                                // –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å –∏–∑ –±–∞–∑–æ–≤—ã—Ö, –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
                                loadDynamicQuestions();
                            }
                        }, 300);
                    });
                });
            }
        }



        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
        async function loadDynamicQuestions() {
            try {
                const response = await fetch(`/api/recommendation/questions?topics=${selectedTopic}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const dynamicQuestions = await response.json();
                
                if (!dynamicQuestions || dynamicQuestions.length === 0) {
                    console.log("üìù –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ:", selectedTopic);
                    allQuestions = createTopicQuestions(selectedTopic);
                } else {
                    allQuestions = dynamicQuestions;
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å
                showDynamicQuestion(0);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:', error);
                console.log("üìù –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ:", selectedTopic);
                allQuestions = createTopicQuestions(selectedTopic);
                showDynamicQuestion(0);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å
        function showDynamicQuestion(index) {
            const container = document.getElementById('question-container');
            const question = allQuestions[index];
            
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
            const progress = ((index + 1) / allQuestions.length) * 100;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
            let backButtonText = "–ù–∞–∑–∞–¥";
            let backButtonAction = "";
            
            if (index === 0) {
                backButtonText = "–ö –≤—ã–±–æ—Ä—É —Ç–µ–º—ã";
                backButtonAction = "showTopicQuestion()";
            } else {
                backButtonAction = `showDynamicQuestion(${index - 1})`;
            }
            
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-counter">–í–æ–ø—Ä–æ—Å ${index + 1} –∏–∑ ${allQuestions.length}</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <h3>${question.text}</h3>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <label class="option">
                                <input type="radio" name="dynamic-q${index}" value="${option}" id="dynamic-q${index}-${optIndex}">
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                    <div class="buttons">
                        <button class="btn btn-secondary" onclick="${backButtonAction}">${backButtonText}</button>
                    </div>
                </div>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–¥–∏–æ –∫–Ω–æ–ø–æ–∫
            container.querySelectorAll('input[type="radio"]').forEach((radio, optionIndex) => {
                radio.addEventListener('change', () => {
                    userAnswers[`dynamic_${question.id}`] = radio.value;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–ª—ã –ë–ê–î–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞
                    if (question.supplementScores) {
                        Object.keys(question.supplementScores).forEach(supplementName => {
                            const scores = question.supplementScores[supplementName];
                            if (scores && scores[optionIndex] !== undefined) {
                                if (!supplementScores[supplementName]) {
                                    supplementScores[supplementName] = 0;
                                }
                                supplementScores[supplementName] += scores[optionIndex];
                                console.log(`üìä ${supplementName}: +${scores[optionIndex]} –±–∞–ª–ª–æ–≤ (–≤—Å–µ–≥–æ: ${supplementScores[supplementName]})`);
                            }
                        });
                    }
                    
                    // –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
                    setTimeout(() => {
                        if (index < allQuestions.length - 1) {
                            showDynamicQuestion(index + 1);
                        } else {
                            // –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω email
                            showEmailScreen();
                        }
                    }, 300);
                });
            });
        }

        // –°–æ–∑–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º–µ
        function createTopicQuestions(selectedTopic) {
            const topicQuestions = {
                "iron": [
                    {
                        id: "iron_deficiency_doctor",
                        text: "–°–æ–æ–±—â–∞–ª –ª–∏ –≤–∞–º –≤—Ä–∞—á –æ –Ω–∏–∑–∫–∏—Ö –∑–∞–ø–∞—Å–∞—Ö –∂–µ–ª–µ–∑–∞ –∏–ª–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ –≥–µ–º–æ–≥–ª–æ–±–∏–Ω–∞?",
                        options: ["–Ω–µ—Ç", "–¥–∞", "–Ω–µ –∑–Ω–∞—é"],
                        supplementScores: {
                            "Iron Chelate": [0, 3, 1]
                        }
                    },
                    {
                        id: "weakness_fatigue",
                        text: "–ë—ã–≤–∞–µ—Ç –ª–∏ —É –≤–∞—Å —Å–ª–∞–±–æ—Å—Ç—å, –±–ª–µ–¥–Ω–æ—Å—Ç—å, —É—Ç–æ–º–ª—è–µ–º–æ—Å—Ç—å –ø—Ä–∏ –ø–æ–¥—ä—ë–º–µ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ?",
                        options: ["–Ω–µ—Ç", "–Ω–µ–º–Ω–æ–≥–æ", "—Å–∏–ª—å–Ω–æ"],
                        supplementScores: {
                            "Iron Chelate": [0, 2, 3]
                        }
                    },
                    {
                        id: "dizziness_shortness",
                        text: "–í–æ–∑–Ω–∏–∫–∞—é—Ç –ª–∏ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ –≤—Å—Ç–∞–≤–∞–Ω–∏–∏ –∏–ª–∏ –æ–¥—ã—à–∫–∞ –ø—Ä–∏ –ª—ë–≥–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ?",
                        options: ["–Ω–µ—Ç", "–∏–Ω–æ–≥–¥–∞", "—á–∞—Å—Ç–æ"],
                        supplementScores: {
                            "Iron Chelate": [0, 2, 3]
                        }
                    },
                    {
                        id: "blood_loss",
                        text: "–ë—ã–ª–∏ –ª–∏ –Ω–µ–¥–∞–≤–Ω–æ –¥–æ–Ω–æ—Ä—Å—Ç–≤–∞ –∏–ª–∏ –∫—Ä–æ–≤–æ–ø–æ—Ç–µ—Ä–∏ (—É –∂–µ–Ω—â–∏–Ω ‚Äî –æ–±–∏–ª—å–Ω—ã–µ –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏)?",
                        options: ["–Ω–µ—Ç", "–±—ã–ª–æ", "–¥–∞, —Ä–µ–≥—É–ª—è—Ä–Ω–æ"],
                        supplementScores: {
                            "Iron Chelate": [0, 2, 3]
                        }
                    }
                ],
                "energy": [
                {
                    id: "afternoon_sleep",
                    text: "–ß–∞—Å—Ç–æ –ª–∏ –≤–∞—Å –∫–ª–æ–Ω–∏—Ç –≤ —Å–æ–Ω –ø–æ—Å–ª–µ –æ–±–µ–¥–∞?",
                        options: ["—Ä–µ–¥–∫–æ", "–∏–Ω–æ–≥–¥–∞", "–ø–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å"],
                        supplementScores: {
                            "Energy": [0, 1, 2],
                            "Coenzyme Q10": [0, 1, 2]
                        }
                    },
                    {
                        id: "coffee_amount",
                        text: "–°–∫–æ–ª—å–∫–æ —á–∞—à–µ–∫ –∫–æ—Ñ–µ –≤—ã –≤—ã–ø–∏–≤–∞–µ—Ç–µ –≤ –¥–µ–Ω—å?",
                        options: ["0-1", "2-3", "4+"],
                        supplementScores: {
                            "Energy": [0, 1, 2]
                        }
                    },
                    {
                        id: "morning_energy",
                        text: "–ö–∞–∫ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è —É—Ç—Ä–æ–º –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è?",
                        options: ["–±–æ–¥—Ä–æ", "–Ω–æ—Ä–º–∞–ª—å–Ω–æ", "—Ç—è–∂–µ–ª–æ –≤—Å—Ç–∞—é"],
                        supplementScores: {
                            "Energy": [0, 1, 2],
                            "Coenzyme Q10": [0, 1, 2]
                        }
                    }
                ],
                "sleep": [
                    {
                        id: "sleep_quality",
                        text: "–ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–≤–æ–µ–≥–æ —Å–Ω–∞?",
                        options: ["—Ö–æ—Ä–æ—à–µ–µ", "—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ", "–ø–ª–æ—Ö–æ–µ"],
                        supplementScores: {
                            "Magnesium B6": [0, 1, 3],
                            "5-HTP 100 –º–≥": [0, 2, 3]
                        }
                    },
                    {
                        id: "stress_level",
                        text: "–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —Å—Ç—Ä–µ—Å—Å?",
                        options: ["—Ä–µ–¥–∫–æ", "–∏–Ω–æ–≥–¥–∞", "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ"],
                        supplementScores: {
                            "Magnesium B6": [0, 2, 3],
                            "Complex B-SAMe": [0, 1, 2]
                        }
                    },
                    {
                        id: "fall_asleep_time",
                        text: "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∑–∞—Å–Ω—É—Ç—å?",
                        options: ["–º–µ–Ω–µ–µ 15 –º–∏–Ω—É—Ç", "15-30 –º–∏–Ω—É—Ç", "–±–æ–ª–µ–µ 30 –º–∏–Ω—É—Ç"],
                        supplementScores: {
                            "5-HTP 100 –º–≥": [0, 1, 3],
                            "Magnesium B6": [0, 1, 2]
                        }
                    }
                ]
            };

            return topicQuestions[selectedTopic] || [
                {
                    id: "general_question",
                    text: "–ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ —Å–≤–æ–µ –æ–±—â–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ?",
                    options: ["–æ—Ç–ª–∏—á–Ω–æ", "—Ö–æ—Ä–æ—à–æ", "—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ"],
                    supplementScores: {}
                }
            ];
        }

        // –°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ-–≤–æ–ø—Ä–æ—Å—ã (fallback)
        function createDemoQuestions() {
            return createTopicQuestions(selectedTopics[0] || "energy");
        }

        // –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–ª–ª–æ–≤
        function createLocalRecommendations() {
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ë–ê–î—ã –ø–æ –±–∞–ª–ª–∞–º (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É)
            const sortedSupplements = Object.entries(supplementScores)
                .filter(([name, score]) => score > 0)
                .sort(([,a], [,b]) => b - a)
                .map(([name, score]) => ({
                    name: name,
                    description: getSupplementDescription(name),
                    imageUrl: getSupplementImage(name),
                    productUrl: getSupplementUrl(name),
                    score: score
                }));

            console.log('üìä –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ë–ê–î—ã –ø–æ –±–∞–ª–ª–∞–º:', sortedSupplements);

            // –†–∞–∑–¥–µ–ª—è–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            const mainRecommendations = sortedSupplements.slice(0, 3);
            const additionalRecommendations = sortedSupplements.slice(3, 5);

            return {
                mainRecommendations: mainRecommendations,
                additionalRecommendations: additionalRecommendations
            };
        }

        // –ü–æ–ª—É—á–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –ë–ê–î–∞
        function getSupplementDescription(name) {
            const descriptions = {
                "Iron Chelate": "–ñ–µ–ª–µ–∑–æ –•–µ–ª–∞—Ç –ø–æ–º–æ–≥–∞–µ—Ç –≤–æ—Å–ø–æ–ª–Ω–∏—Ç—å –¥–µ—Ñ–∏—Ü–∏—Ç –∂–µ–ª–µ–∑–∞. –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∂–µ–ª–µ–∑–∞ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —É–º–µ–Ω—å—à–µ–Ω–∏—é —É—Å—Ç–∞–ª–æ—Å—Ç–∏.",
                "Energy": "–ö–æ–º–ø–ª–µ–∫—Å –≤–∏—Ç–∞–º–∏–Ω–æ–≤ –≥—Ä—É–ø–ø—ã B –∏ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –∏ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏. –ü–æ–º–æ–≥–∞–µ—Ç –±–æ—Ä–æ—Ç—å—Å—è —Å —É—Å—Ç–∞–ª–æ—Å—Ç—å—é –∏ —É–ª—É—á—à–∞–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –≤–Ω–∏–º–∞–Ω–∏—è.",
                "Coenzyme Q10": "–ú–æ—â–Ω—ã–π –∞–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å–µ—Ä–¥—Ü–∞ –∏ –ø–æ–≤—ã—à–∞–µ—Ç —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –æ–±–º–µ–Ω –≤ –∫–ª–µ—Ç–∫–∞—Ö.",
                "Magnesium B6": "–ú–∞–≥–Ω–∏–π —Å –≤–∏—Ç–∞–º–∏–Ω–æ–º B6 –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Å–Ω–∞.",
                "5-HTP 100 –º–≥": "–ü—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫ —Å–µ—Ä–æ—Ç–æ–Ω–∏–Ω–∞ –∏ –º–µ–ª–∞—Ç–æ–Ω–∏–Ω–∞. –ü–æ–º–æ–≥–∞–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–Ω, —É–ª—É—á—à–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–Ω–∏–∂–∞–µ—Ç —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å.",
                "Complex B-SAMe": "SAMe —Å –≤–∏—Ç–∞–º–∏–Ω–∞–º–∏ –≥—Ä—É–ø–ø—ã B –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã –ø–µ—á–µ–Ω–∏."
            };
            return descriptions[name] || "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –¥–æ–±–∞–≤–∫–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è";
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ë–ê–î–∞
        function getSupplementImage(name) {
            return `/images/${name.toLowerCase().replace(/\s+/g, '-')}.jpg`;
        }

        // –ü–æ–ª—É—á–∏—Ç—å URL –ë–ê–î–∞
        function getSupplementUrl(name) {
            const urls = {
                "Iron Chelate": "https://soloways.ru/ironchelate",
                "Energy": "https://soloways.ru/products/energy-complex",
                "Coenzyme Q10": "https://soloways.ru/products/coenzyme-q10",
                "Magnesium B6": "https://soloways.ru/products/magnesium-b6",
                "5-HTP 100 –º–≥": "https://soloways.ru/products/5-htp",
                "Complex B-SAMe": "https://soloways.ru/products/complex-b-same"
            };
            return urls[name] || "https://soloways.ru";
        }

        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        function displayRecommendations(result) {
                console.log('üéØ –ù–∞—á–∏–Ω–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π');
                console.log('üìä –ü–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:', result);
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                const mainContainer = document.getElementById('main-recommendations');
                console.log('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:', mainContainer);
                mainContainer.innerHTML = '';
                console.log('üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result.mainRecommendations);
                result.mainRecommendations.forEach(supplement => {
                    const div = document.createElement('div');
                    div.className = 'product-card';
                    div.innerHTML = `
                        <div class="card-badge">NEW</div>
                        <img src="${supplement.imageUrl || '/images/default-supplement.jpg'}" alt="${supplement.name}" class="product-image" onerror="this.src='/images/default-supplement.jpg'">
                        <div class="product-content">
                            <h3 class="product-title">${supplement.name.toUpperCase()}</h3>
                            <p class="product-description">
                                ${supplement.description && supplement.description.trim() !== '' ? 
                                    supplement.description.split('.')[0].toUpperCase() : 
                                    '–û–ü–ò–°–ê–ù–ò–ï –í–†–ï–ú–ï–ù–ù–û –ù–ï–î–û–°–¢–£–ü–ù–û'
                                }
                            </p>
                            <div class="product-price">${supplement.price ? supplement.price + ' ‚ÇΩ' : '–¶–µ–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É'}</div>
                        <button class="details-btn" onclick="goToProduct('${supplement.productUrl || ''}', '${supplement.name}')">–ü–û–î–†–û–ë–ù–ï–ï</button>
                        </div>
                    `;
                    console.log('–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞:', supplement.name);
                    mainContainer.appendChild(div);
                });
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                const additionalContainer = document.getElementById('additional-recommendations');
                additionalContainer.innerHTML = '';
                result.additionalRecommendations.forEach(supplement => {
                    const div = document.createElement('div');
                    div.className = 'product-card';
                    div.innerHTML = `
                        <div class="card-badge">NEW</div>
                        <img src="${supplement.imageUrl || '/images/default-supplement.jpg'}" alt="${supplement.name}" class="product-image" onerror="this.src='/images/default-supplement.jpg'">
                        <div class="product-content">
                            <h3 class="product-title">${supplement.name.toUpperCase()}</h3>
                            <p class="product-description">
                                ${supplement.description && supplement.description.trim() !== '' ? 
                                    supplement.description.split('.')[0].toUpperCase() : 
                                    '–û–ü–ò–°–ê–ù–ò–ï –í–†–ï–ú–ï–ù–ù–û –ù–ï–î–û–°–¢–£–ü–ù–û'
                                }
                            </p>
                            <div class="product-price">${supplement.price ? supplement.price + ' ‚ÇΩ' : '–¶–µ–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É'}</div>
                        <button class="details-btn" onclick="goToProduct('${supplement.productUrl || ''}', '${supplement.name}')">–ü–û–î–†–û–ë–ù–ï–ï</button>
                        </div>
                    `;
                    additionalContainer.appendChild(div);
                });
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
        async function submitAnswers() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            document.getElementById('question-container').classList.add('hidden');
            document.getElementById('email-screen').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('loading').classList.remove('hidden');
            
            try {
                // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç—ã –¥–ª—è API
                const apiAnswers = [];
                Object.keys(userAnswers).forEach(key => {
                    if (key.startsWith('dynamic_')) {
                        const questionId = key.replace('dynamic_', '');
                        apiAnswers.push({
                            questionId: questionId,
                            answer: userAnswers[key]
                        });
                    }
                });
                
                console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å:', {
                    answers: apiAnswers,
                    selectedTopic: selectedTopic
                });
                
                console.log('üìä –ò—Ç–æ–≥–æ–≤—ã–µ –±–∞–ª–ª—ã –ë–ê–î–æ–≤:', supplementScores);
                
                const response = await fetch('/api/recommendation/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        selectedTopic: selectedTopic,
                        answers: apiAnswers,
                        email: userEmail,
                        consentPd: userConsentPd,
                        consentMarketing: userConsentMarketing,
                        userName: userName
                    })
                });
                
                console.log('üì• –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç:', response.status, response.statusText);
                
                let result;
                if (response.ok) {
                    result = await response.json();
                    console.log('üìã –†–µ–∑—É–ª—å—Ç–∞—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞:', result);
                } else {
                    // –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å–æ–∑–¥–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                    result = createLocalRecommendations();
                    console.log('üìã –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result);
                }
                
                            console.log('–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result.mainRecommendations);
            console.log('–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result.additionalRecommendations);
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('results-content').classList.remove('hidden');
                
                console.log('üéØ –°–∫—Ä—ã–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É, –ø–æ–∫–∞–∑–∞–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤');
                console.log('üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:', result);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
                if (!result || !result.mainRecommendations || !result.additionalRecommendations) {
                    console.error('‚ùå –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:', result);
                    document.getElementById('results-content').innerHTML = 
                        '<div class="error">–û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞</div>';
                    return;
                }
                
                console.log('‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞');
                console.log('üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result.mainRecommendations.length);
                console.log('üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result.additionalRecommendations.length);
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                displayRecommendations(result);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:', error);
                console.log('üìã –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ API');
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                const result = createLocalRecommendations();
                
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('results-content').classList.remove('hidden');
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                displayRecommendations(result);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ email
        function showEmailScreen() {
            document.getElementById('question-container').classList.add('hidden');
            document.getElementById('email-screen').classList.remove('hidden');
        }

        // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–≤–æ–¥ email
        function skipEmail() {
            userEmail = '';
            userConsentPd = false;
            userConsentMarketing = false;
            submitAnswers();
        }

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å email –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        function submitEmail() {
            const emailInput = document.getElementById('userEmail');
            const consentPdCheckbox = document.getElementById('consentPd');
            const consentMarketingCheckbox = document.getElementById('consentMarketing');
            
            const email = emailInput.value.trim();
            const consentPd = consentPdCheckbox.checked;
            const consentMarketing = consentMarketingCheckbox.checked;
            
            if (email && !isValidEmail(email)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å');
                return;
            }
            
            if (email && !consentPd) {
                alert('–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö');
                return;
            }
            
            userEmail = email;
            userConsentPd = consentPd;
            userConsentMarketing = consentMarketing;
            
            submitAnswers();
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ email
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
        function restart() {
            currentQuestionIndex = 0;
            userAnswers = {};
            selectedTopics = [];
            allQuestions = [];
            supplementScores = {}; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –±–∞–ª–ª—ã
            userName = '';
            selectedTopic = '';
            userEmail = '';
            userConsentPd = false;
            userConsentMarketing = false;
            
            document.getElementById('results').classList.add('hidden');
            document.getElementById('email-screen').classList.add('hidden');
            document.getElementById('question-container').classList.remove('hidden');
            
            showWelcomeScreen();
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞
        function goToProduct(productUrl, supplementName) {
            console.log('üîó –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ç–æ–≤–∞—Ä—É:', supplementName, 'URL:', productUrl);
            
            if (!productUrl || productUrl.trim() === '') {
                console.warn('‚ö†Ô∏è URL —Ç–æ–≤–∞—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è:', supplementName);
                alert('–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                return;
            }
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
            window.open(productUrl, '_blank');
        }



        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–µ–≥–æ–≤
        function getTagDisplayName(tag) {
            const tagNames = {
                'energy': '–≠–Ω–µ—Ä–≥–∏—è',
                'vitality': '–ë–æ–¥—Ä–æ—Å—Ç—å',
                'heart': '–°–µ—Ä–¥—Ü–µ',
                'antioxidant': '–ê–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç',
                'iron': '–ñ–µ–ª–µ–∑–æ',
                'hemoglobin': '–ì–µ–º–æ–≥–ª–æ–±–∏–Ω',
                'thyroid': '–©–∏—Ç–æ–≤–∏–¥–∫–∞',
                'tyrosine': '–¢–∏—Ä–æ–∑–∏–Ω',
                'sleep': '–°–æ–Ω',
                'stress': '–°—Ç—Ä–µ—Å—Å',
                'magnesium': '–ú–∞–≥–Ω–∏–π',
                'nerves': '–ù–µ—Ä–≤—ã',
                '5-htp': '5-HTP',
                'serotonin': '–°–µ—Ä–æ—Ç–æ–Ω–∏–Ω',
                'same': 'SAMe',
                'mood': '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
                'weight': '–í–µ—Å',
                'berberine': '–ë–µ—Ä–±–µ—Ä–∏–Ω',
                'metabolism': '–ú–µ—Ç–∞–±–æ–ª–∏–∑–º',
                'appetite': '–ê–ø–ø–µ—Ç–∏—Ç',
                'hunger': '–ì–æ–ª–æ–¥',
                'slim': '–°–Ω–∏–∂–µ–Ω–∏–µ –≤–µ—Å–∞',
                'skin': '–ö–æ–∂–∞',
                'collagen': '–ö–æ–ª–ª–∞–≥–µ–Ω',
                'anti-aging': '–ê–Ω—Ç–∏–≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π',
                'glutathione': '–ì–ª—É—Ç–∞—Ç–∏–æ–Ω',
                'hyaluronic': '–ì–∏–∞–ª—É—Ä–æ–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞',
                'hydration': '–£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ',
                'omega-3': '–û–º–µ–≥–∞-3',
                'epa': 'EPA',
                'dha': 'DHA',
                'resveratrol': '–†–µ—Å–≤–µ—Ä–∞—Ç—Ä–æ–ª',
                'tmg': 'TMG',
                'homocysteine': '–ì–æ–º–æ—Ü–∏—Å—Ç–µ–∏–Ω',
                'immunity': '–ò–º–º—É–Ω–∏—Ç–µ—Ç',
                'zinc': '–¶–∏–Ω–∫',
                'minerals': '–ú–∏–Ω–µ—Ä–∞–ª—ã',
                'selenium': '–°–µ–ª–µ–Ω',
                'vitamin-c': '–í–∏—Ç–∞–º–∏–Ω C'
            };
            return tagNames[tag] || tag;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            showQuestion(0);
        });
        
        console.log('üîÑ –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: 6.0 - –ö–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å—Ç–∏–ª–µ —Ñ–æ—Ç–æ —Å —Ü–µ–Ω–∞–º–∏');
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
        if (performance.navigation.type === 1) {
            console.log('üîÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º');
        }
    </script>
</body>
</html>

