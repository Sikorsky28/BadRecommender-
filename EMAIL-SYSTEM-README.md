# üìß –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ email —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫—Ä–∞—Å–∏–≤—ã–µ HTML-email —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ë–ê–î–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã –∑–¥–æ—Ä–æ–≤—å—è.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. HTML-—à–∞–±–ª–æ–Ω email
- **–§–∞–π–ª**: `src/main/resources/templates/email-recommendations.html`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö—Ä–∞—Å–∏–≤—ã–π HTML-—à–∞–±–ª–æ–Ω —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- **–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã**:
  - `{userName}` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `{selectedTopic}` - –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è
  - `{mainRecommendations}` - HTML –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–¥–æ 3 –ë–ê–î–æ–≤)
  - `{additionalRecommendations}` - HTML –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–¥–æ 2 –ë–ê–î–æ–≤)

### 2. EmailService
- **–§–∞–π–ª**: `src/main/java/com/soloway/BadRecommender/service/EmailService.java`
- **–ú–µ—Ç–æ–¥—ã**:
  - `sendHtmlRecommendationsEmail()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ HTML-email —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
  - `sendEmail()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ email
  - `sendRecommendationsEmail()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ email —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

### 3. EmailController
- **–§–∞–π–ª**: `src/main/java/com/soloway/BadRecommender/controller/EmailController.java`
- **Endpoints**:
  - `POST /api/email/send-recommendations` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
  - `POST /api/email/test` - —Ç–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

### 4. RecommendationService
- **–§–∞–π–ª**: `src/main/java/com/soloway/BadRecommender/service/RecommendationService.java`
- **–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
  - `getMainRecommendations(String topicCode)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
  - `getAdditionalRecommendations(String topicCode)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### 5. –ú–æ–¥–µ–ª—å Supplement
- **–§–∞–π–ª**: `src/main/java/com/soloway/BadRecommender/model/Supplement.java`
- **–ù–æ–≤–æ–µ –ø–æ–ª–µ**: `type` - —Ç–∏–ø –ë–ê–î–∞ ("–æ—Å–Ω–æ–≤–Ω—ã–µ" –∏–ª–∏ "–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ")

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ß–µ—Ä–µ–∑ API

```bash
POST /api/email/send-recommendations
Content-Type: application/json

{
  "userEmail": "user@example.com",
  "userName": "–ò–≤–∞–Ω",
  "selectedTopic": "energy"
}
```

### 2. –ß–µ—Ä–µ–∑ –≤–µ–±-—Ñ–æ—Ä–º—É

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-domain.com/email-form.html`

### 3. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ

```java
@Autowired
private EmailService emailService;

@Autowired
private RecommendationService recommendationService;

public void sendRecommendations(String userEmail, String userName, String topicCode) {
    List<Supplement> mainRecommendations = recommendationService.getMainRecommendations(topicCode);
    List<Supplement> additionalRecommendations = recommendationService.getAdditionalRecommendations(topicCode);
    
    emailService.sendHtmlRecommendationsEmail(
        userEmail, userName, topicCode, 
        mainRecommendations, additionalRecommendations
    );
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```yaml
# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
MAIL_HOST: smtp.msndr.net
MAIL_PORT: 465
MAIL_USERNAME: marketing@soloways.ru
MAIL_PASSWORD: your-password

# Google Sheets
GOOGLE_SHEETS_SPREADSHEET_ID: your-spreadsheet-id
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Google Sheets

–õ–∏—Å—Ç "Supplements" –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏:
- A: ID
- B: –ù–∞–∑–≤–∞–Ω–∏–µ –ë–ê–î–∞
- C: –ö–∞—Ç–µ–≥–æ—Ä–∏—è (—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è)
- D: –¢–∏–ø ("–æ—Å–Ω–æ–≤–Ω—ã–µ" –∏–ª–∏ "–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ")
- E: –û–ø–∏—Å–∞–Ω–∏–µ
- F: URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- G: URL –ø—Ä–æ–¥—É–∫—Ç–∞
- H: –¶–µ–Ω–∞

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã

- `iron` - –ü–æ–¥–Ω—è—Ç—å –≥–µ–º–æ–≥–ª–æ–±–∏–Ω
- `energy` - –ë–æ–¥—Ä–æ—Å—Ç—å –∏ —ç–Ω–µ—Ä–≥–∏—è
- `sleep` - –ö—Ä–µ–ø–∫–∏–π —Å–æ–Ω, –º–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞
- `weight` - –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Å–∞ –∏ –∞–ø–ø–µ—Ç–∏—Ç–∞
- `skin` - –ß–∏—Å—Ç–∞—è –∫–æ–∂–∞, –∫—Ä–µ–ø–∫–∏–µ –≤–æ–ª–æ—Å—ã
- `digestion` - –ö–æ–º—Ñ–æ—Ä—Ç –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è
- `joints` - –ü–æ–¥–≤–∏–∂–Ω—ã–µ —Å—É—Å—Ç–∞–≤—ã, –∫—Ä–µ–ø–∫–∏–µ –∫–æ—Å—Ç–∏
- `immunity` - –°–∏–ª—å–Ω—ã–π –∏–º–º—É–Ω–∏—Ç–µ—Ç
- `heart` - –ó–¥–æ—Ä–æ–≤–æ–µ —Å–µ—Ä–¥—Ü–µ –∏ —Å–æ—Å—É–¥—ã
- `thyroid` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —â–∏—Ç–æ–≤–∏–¥–Ω–æ–π –∂–µ–ª–µ–∑—ã
- `female` - –†–µ–≥—É–ª—è—Ä–Ω—ã–π —Ü–∏–∫–ª, –º—è–≥–∫–∏–π –ü–ú–°
- `menopause` - –ú–µ–Ω–æ–ø–∞—É–∑–∞ –±–µ–∑ –ø—Ä–∏–ª–∏–≤–æ–≤
- `male` - –ú—É–∂—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://your-domain.com/email-form.html`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –ø–æ–ª—É—á–∞—Ç–µ–ª—è

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç:
- ‚úÖ –£—Å–ø–µ—à–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É email
- ‚ùå –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- üìä –ó–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ Google Sheets
- üîç –ü—Ä–æ—Ü–µ—Å—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ SMTP —Å–µ—Ä–≤–µ—Ä–∞
- –ü–∞—Ä–æ–ª—å email —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
